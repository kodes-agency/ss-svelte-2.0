interface Product {
    name: string;
    quantity: number;
    price: number;
}

function productTemplate(products: Product[]): string {
    return products.map((product: Product) => {
        return `
            <tr>
                <td>${product.name}</td>
                <td>${product.quantity}</td>
                <td>${product.price} BGN</td>
            </tr>
        `
    }).join("");
}

export function emailTemplate(lang: string, orderNumber: string, firstName: string, lastName: string, orderTotal: string, paymentMethod: string, products: Product[]): string {
    const productRows = productTemplate(products);
    let template = `
    <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Santa Sarah</title>
            <style>
                body {
                    font-family: Arial, Arial, Helvetica, sans-serif;
                    line-height: 1.5;
                    color: #847648;
                    background-color: #F5F3E4;
                }

                .logo {
                    fill: #F5F3E4
                }

                .email-container {
                    width: 100%;
                    max-width: 600px;
                    margin: 0 auto;
                    border: 1px solid #847648;
                }
                .header {
                    background-color: #847648;
                    padding: 20px;;
                    text-align: center;
                }
                .header h1 {
                    margin: 0;
                    color: #F5F3E4;
                    font-size: 24px;
                    padding-top: 10px;
                    font-weight: 500;
                }
                .body {
                    padding: 10px;
                }
                .table-container {
                    width: 100%;
                    border-collapse: collapse;
                }
                .table-container th, .table-container td {
                    border: 1px solid #847648;
                    padding: 8px;
                    text-align: left;
                }

                .table-bottom {
                    margin-top: -1px;
                }

                .footer {
                    padding: 10px;
                    text-align: center;
                    font-size: 12px;
                }

                .flex-col {
                    display: flex;
                    flex-direction: column;
                }
                
                a {
                    color: #847648;
                    text-decoration: none;
                }

                .table-bottom-header {
                    opacity: 0;
                }
            </style>
        </head>
        <body>
            <div class="email-container">
                <div class="header">
                    <svg class="black transition-all duration-300 fill-brown" id="logo" width="191" height="31" viewBox="0 0 191 31" fill="" xmlns="http://www.w3.org/2000/svg"><path class="logo" fill-rule="evenodd" clip-rule="evenodd" d="M23 28.2781C25.9986 30.1859 29.5435 30.8152 33.0605 30.4866C35.7361 30.2381 38.2164 29.5006 40.5172 28.3181C42.487 27.3081 44.3332 25.9653 46 24.3901C45.2942 24.334 44.3611 24.5625 43.5676 24.9312C41.518 26.7069 39.5602 27.6327 36.6891 28.0015C34.7751 28.246 32.8053 28.2179 31.0109 27.8772C29.2405 27.5446 27.4461 26.8712 25.9428 25.8852C31.9719 19.9411 31.4336 6.33734 23 0.56958C14.1637 6.47762 14.1318 19.8489 20.0572 25.8852C18.5539 26.8712 16.7595 27.5406 14.9891 27.8772C13.1947 28.2179 11.2249 28.246 9.31085 28.0015C6.43984 27.6327 4.47798 26.7069 2.43239 24.9312C1.63887 24.5625 0.705791 24.334 0 24.3901C1.66678 25.9653 3.513 27.3081 5.48284 28.3181C7.78762 29.5006 10.2639 30.234 12.9395 30.4866C16.4565 30.8152 20.0014 30.1819 23 28.2781ZM23 23.4001C28.6144 19.4921 27.1151 6.58985 23 2.62577C18.3067 6.58985 17.3856 19.4921 23 23.4001Z"></path><path class="logo svelte-1cu04lu" fill-rule="evenodd" clip-rule="evenodd" d="M84.9974 15.0492V13.754C86.4229 13.2144 88.5776 12.5668 88.7299 12.5344C88.9149 12.4912 89.2632 12.5236 89.2632 12.7071V15.2543C91.124 13.3871 92.7019 12.5344 93.7901 12.5344C96.2495 12.5344 97.3921 15.6104 97.3921 18.1792V27.7527C97.3921 28.2923 97.7404 29.0371 98.143 29.0371H99.1659V30.4941H93.5507V29.0371H94.3995C94.8457 29.0371 95.3463 28.2168 95.3463 27.7851V18.3195C95.3463 16.7761 94.8239 14.5851 92.506 14.7254C91.1349 14.8117 90.0032 15.7508 89.2632 17.1862V27.7527C89.2632 28.2923 89.742 29.0371 90.1446 29.0371H91.0152V30.4941H85.4218V29.0371H86.2706C86.7168 29.0371 87.2173 28.2168 87.2173 27.7851V16.0745C87.2173 15.4809 86.7494 15.0492 86.4121 15.0492H84.9865H84.9974ZM102.452 25.9718V15.1355H100.341V13.2899C101.049 13.3115 101.745 13.3331 102.452 13.3547V9.04824L104.531 7.6991V13.3871C106 13.3871 107.48 13.4518 108.971 13.3655V15.1679L104.531 15.1895V26.1229C104.531 27.9254 105.456 28.6161 106.631 28.6161C107.262 28.6161 107.948 28.573 108.851 28.152V29.7818C107.828 30.2459 106.707 30.5049 105.293 30.5049C105.042 30.5049 104.193 30.397 103.399 29.7818C102.485 29.0802 102.452 27.267 102.452 25.961V25.9718ZM175.722 2.19461V0.554062L179.628 0.00361138C179.868 -0.0287679 180.118 0.154717 180.118 0.629613V15.6644C181.837 12.9122 183.742 12.6423 184.841 12.6423C187.3 12.6423 188.443 15.5889 188.443 18.1684V27.7419C188.443 28.2815 188.791 29.0263 189.194 29.0263H190.217V30.4833H184.602V29.0263H185.45C185.897 29.0263 186.397 28.206 186.397 27.7743V18.6433C186.397 17.0999 185.679 14.8765 183.35 15.0276C181.979 15.114 180.847 16.1717 180.107 17.6072V27.7419C180.107 28.2815 180.586 29.0263 180.989 29.0263H181.859V30.4833H176.266V29.0263H177.115C177.561 29.0263 178.061 28.206 178.061 27.7743V3.4682C178.061 2.5292 177.506 2.19461 176.777 2.19461H175.7H175.722ZM154.262 15.0924V13.6893C155.764 13.4518 157.538 12.4912 157.69 12.4589C157.962 12.3941 158.332 12.5452 158.332 13.0309V19.2477C158.833 17.3373 159.301 16.2149 159.888 14.9629C160.639 13.3547 161.542 12.4157 162.478 12.4049C163.686 12.4049 164.187 13.2575 164.198 14.434C164.198 15.1248 162.935 15.9126 162.598 15.6536C162.391 15.4162 162.032 15.373 161.716 15.3946C160.149 15.4917 158.833 19.6255 158.343 22.0971V27.7419C158.343 28.2815 158.822 29.0263 159.224 29.0263H161.042V30.4833H154.502V29.0263H155.35C155.797 29.0263 156.297 28.206 156.297 27.7743V16.2041C156.297 15.686 155.775 15.0924 155.263 15.0924H154.273H154.262ZM60.839 25.4861C60.839 27.4289 62.7108 28.6269 64.5716 28.6269C67.956 28.6269 68.8809 25.8855 68.8592 22.9282C68.8374 20.5321 68.0974 18.6757 64.7784 16.8516C61.7967 15.2003 59.9032 12.815 59.9032 9.30727C59.9032 4.66624 62.689 1.62258 67.0745 1.62258C68.2607 1.62258 70.1324 1.88161 70.9268 2.29175V8.67047H69.425L69.3053 5.52968C69.2509 4.20213 67.8254 3.43582 66.563 3.41424C64.2125 3.36027 62.3734 6.05854 62.3734 8.37906C62.3734 11.2069 63.1678 12.4589 66.4107 14.2181C69.5012 15.9019 71.4056 18.5354 71.4056 21.9892C71.4056 24.5687 70.9921 27.1591 69.0333 28.8428C67.4989 30.1596 65.4422 30.5589 63.3963 30.5589C62.2211 30.5589 60.5343 29.9976 59.4352 29.3932L59.5332 22.8634C59.9032 22.8418 60.4255 22.8526 60.8282 22.8526V25.4861H60.839ZM115.968 22.518L117.731 22.3561V26.328C117.393 26.7057 116.632 27.5368 116.207 27.7743C115.206 28.3355 113.9 28.6053 113.117 27.9577C112.116 27.1267 112.224 24.817 112.867 24.0291C113.574 23.1548 114.782 22.626 115.979 22.5288L115.968 22.518ZM117.883 28.1628L117.927 29.5875C117.938 30.03 118.221 30.3214 118.852 30.3214H121.507V28.8644H120.756C120.136 28.8644 119.755 28.2707 119.755 27.4829V17.7151C119.733 14.121 117.829 12.6315 115.794 12.6315C113.552 12.6531 111.952 15.1463 111.082 16.5279L112.094 17.2618C113.258 15.4917 114.292 14.5527 115.478 14.5527C117.165 14.5203 117.731 15.8047 117.731 17.1862V20.9314C115.522 21.0178 112.431 21.2876 110.962 23.6189C110.026 25.1192 110.005 27.4505 110.908 28.9291C111.517 29.9221 112.562 30.4078 113.868 30.397C114.749 30.397 115.522 30.138 116.425 29.4796C116.795 29.2098 117.491 28.6161 117.872 28.152L117.883 28.1628ZM78.3375 22.518L80.1004 22.3561V26.328C79.7631 26.7057 79.0013 27.5368 78.5769 27.7743C77.5758 28.3355 76.2699 28.6053 75.4864 27.9577C74.4852 27.1267 74.5941 24.817 75.2361 24.0291C75.9434 23.1548 77.1514 22.626 78.3484 22.5288L78.3375 22.518ZM80.2528 28.1628L80.2963 29.5875C80.3072 30.03 80.5901 30.3214 81.2213 30.3214H83.8765V28.8644H83.1256C82.5054 28.8644 82.1245 28.2707 82.1245 27.4829V17.7151C82.1027 14.121 80.1984 12.6315 78.1634 12.6315C75.9217 12.6531 74.322 15.1463 73.4514 16.5279L74.4635 17.2618C75.6279 15.4917 76.6617 14.5527 77.8478 14.5527C79.5345 14.5203 80.1004 15.8047 80.1004 17.1862V20.9314C77.8913 21.0178 74.8008 21.2876 73.3317 23.6189C72.3959 25.1192 72.3741 27.4505 73.2773 28.9291C73.8867 29.9221 74.9314 30.4078 76.2373 30.397C77.1187 30.397 77.8913 30.138 78.7946 29.4796C79.1646 29.2098 79.861 28.6161 80.2419 28.152L80.2528 28.1628ZM147.417 22.518L149.18 22.3561V26.328C148.843 26.7057 148.081 27.5368 147.657 27.7743C146.656 28.3355 145.35 28.6053 144.566 27.9577C143.565 27.1267 143.674 24.817 144.316 24.0291C145.023 23.1548 146.231 22.626 147.428 22.5288L147.417 22.518ZM149.333 28.1628L149.376 29.5875C149.387 30.03 149.67 30.3214 150.301 30.3214H152.956V28.8644H152.205C151.585 28.8644 151.204 28.2707 151.204 27.4829V17.7151C151.183 14.121 149.278 12.6315 147.243 12.6315C145.001 12.6531 143.402 15.1463 142.531 16.5279L143.543 17.2618C144.708 15.4917 145.741 14.5527 146.928 14.5527C148.614 14.5203 149.18 15.8047 149.18 17.1862V20.9314C146.971 21.0178 143.881 21.2876 142.412 23.6189C141.476 25.1192 141.454 27.4505 142.357 28.9291C142.967 29.9221 144.011 30.4078 145.317 30.397C146.199 30.397 146.971 30.138 147.874 29.4796C148.244 29.2098 148.941 28.6161 149.322 28.152L149.333 28.1628ZM129.745 25.4753C129.745 27.4181 131.616 28.6161 133.477 28.6161C136.862 28.6161 137.787 25.8747 137.765 22.9174C137.743 20.5213 137.003 18.6649 133.684 16.8409C130.702 15.1895 128.809 12.8042 128.809 9.29647C128.809 4.65544 131.595 1.61179 135.98 1.61179C137.166 1.61179 139.038 1.87082 139.832 2.28096V8.65969H138.331L138.211 5.51889C138.157 4.19134 136.731 3.42503 135.469 3.40344C133.118 3.34947 131.279 6.04775 131.279 8.36827C131.279 11.1961 132.073 12.4481 135.316 14.2073C138.407 15.8911 140.311 18.5246 140.311 21.9784C140.311 24.5579 139.898 27.1483 137.939 28.832C136.405 30.1487 134.348 30.5481 132.302 30.5481C131.127 30.5481 129.44 29.9869 128.341 29.3824L128.439 22.8526C128.809 22.831 129.331 22.8418 129.734 22.8418V25.4753H129.745ZM169.595 22.5072L171.358 22.3453V26.3172C171.021 26.695 170.259 27.526 169.835 27.7635C168.833 28.3247 167.527 28.5945 166.744 27.947C165.743 27.1159 165.852 24.8062 166.494 24.0183C167.201 23.144 168.409 22.6152 169.606 22.518L169.595 22.5072ZM171.51 28.152L171.554 29.5767C171.565 30.0192 171.848 30.3107 172.479 30.3107H175.134V28.8536H174.383C173.763 28.8536 173.382 28.26 173.382 27.4721V17.7043C173.36 14.1102 171.456 12.6208 169.421 12.6208C167.179 12.6423 165.58 15.1355 164.709 16.5171L165.721 17.251C166.885 15.4809 167.919 14.5419 169.105 14.5419C170.792 14.5095 171.358 15.7939 171.358 17.1754V20.9206C169.149 21.007 166.058 21.2768 164.589 23.6081C163.653 25.1084 163.632 27.4397 164.535 28.9183C165.144 29.9113 166.189 30.397 167.495 30.3862C168.376 30.3862 169.149 30.1272 170.052 29.4688C170.422 29.1989 171.119 28.6053 171.499 28.1412L171.51 28.152Z"></path></svg>
                </div>
                <div class="body">
                    <p>${lang === "bg" ? "Здравейте," : "Dear"} ${firstName} ${lastName}</p>
                    <p>${lang === "bg" ? "Благодарим Ви, че избрахте винарско имение Санта Сара. Номерът на Вашата поръчка е:" : "Thank you for your purchase. Your order number is:"} <span>${orderNumber}</span></p>
                    <p>We will proccess your order as soon as possible and contact you with the details for the delivery method and price.</p>
                    <p>Here are the details of your order:</p>
                    <table class="table-container">
                        <thead>
                            <tr>
                                <th>${lang === "bg" ? "Име на продукта" : "Product Name"}</th>
                                <th>${lang === "bg" ? "Koличество" : "Quantity" }</th>
                                <th>${lang === "bg" ? "Цена" : "Price" }</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${productTemplate(products)}
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2">${lang === "bg" ? "Общо" : "Total"}</td>
                                <td>${orderTotal}</td>
                            </tr>
                            <tr>
                                <td colspan="2">${lang === "bg" ? "Доставка" : "Shipping"}</td>
                                <td>${lang === "bg" ? "В изчакване на детайли" : "Аwaiting more details"}</td>
                            </tr>
                            <tr>
                                <td colspan="2">${lang === "bg" ? "Начин на плащане" : "Payment method"}</td>
                                <td>${paymentMethod}</td>
                            </tr>
                        </tfoot>
                    </table>


                    <p>${lang === "bg" ? "Надяваме се да се насладите на всяка капка от поръчаните вина. Ако имате въпроси, не се колебайте да се свържете с нас на посочените данни за контакт." : "We hope you enjoy your wine. If you have any questions, feel free to contact our team."}</p>
                </div>
                <div class="footer">
                    <p>&copy; 2024 ${lang === "bg" ? "Винарско имение Санта Сара АД" : "Santa Sarah Wine Estate"}</p>
                    <p>${lang === "bg" ? "Горица 8225, ул. Ивайло 2, <br> района на Поморие, Бургас, България" : "Goritsa 8225, Ivaylo 2 street, <br> Pomorie region, Burgas, Bulgaria"}</p>
                    
                    <div class="flex-col">
                        <a href="https://wwww.santa-sarah.com">www.santa-sarah.com</a>
                        <a href="tel:+359888908064">+359 888 9080 64</a>
                        <a href="mailto:genowski@santa-sarah.com">genowski@santa-sarah.com</a>
                    </div>
                </div>
            </div>
        </body>
        </html>
    `

    template = template.replace(/\s+/g, ' ').trim();

    return template;
}
